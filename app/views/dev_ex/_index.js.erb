

// // Локализация компонентов отчета
DevExpress.localization.locale('ru');

<%= render partial: 'datasources', formats: [:js] %>
<%= render partial: 'columns', formats: [:js] %>


const grid = $('#grid').dxDataGrid({
    paging: { enabled: true },
    dataSource: gridDataSource(),
    selection: {
      mode: 'single',
    },
    remoteOperations: {
     paging: true,
     filtering: true,
     sorting: true,
     grouping: true, //!
     summary: true, //!
     groupPaging: true, //!
    },
    hoverStateEnabled: true,
    columns: gridColumns(),
    groupPanel: {visible: true},
    headerFilter: {allowSearch: true, visible: false},
    filterPanel: {visible: true},
    filterRow: {visible: true},
    wordWrapEnabled: true,
    allowColumnReordering: true,
    allowColumnResizing: true,
    // columnAutoWidth: true,
    showBorders: true,
    width: 'auto',
    searchPanel: { visible: true},
    sorting: {
      mode: 'multiple',
    },
    columnChooser: {
      enabled: false,
    },
    columnFixing: {
      enabled: false,
    },
    selection: {
      mode: 'single',
    },
    showBorders: true,
    scrolling: {
      mode: 'standard',
    },
    headerFilter: {
      visible: true,
    },
    summary: {
     totalItems: [
          { name: "ref1_id_val", column: "ref1_id", summaryType: "sum",  showInColumn: "ref1_id", },
          { name: "ref1_id_val_avg", column: "ref1_id", summaryType: "avg", showInColumn: "start_date", },
      ],
     groupItems: [
          { name: "ref1_id_val", column: "ref1_id", summaryType: "sum",  showInColumn: "ref1_id", },
          { name: "ref1_id_val_avg", column: "ref1_id", summaryType: "avg", showInColumn: "start_date", },
      ],
    }
  }
).dxDataGrid('instance')

